CMAKE_MINIMUM_REQUIRED(VERSION 2.8)
cmake_policy(SET CMP0007 NEW)

SET(SUPPORTED_DEVICES "msp430f5529;msp430f5521" 
	CACHE STRING "Supported Target Devices")

INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR} ${INCLUDE_DIRECTORIES}")

FOREACH(device ${SUPPORTED_DEVICES})
    IF(device MATCHES "msp430f(5|6)[a-z|0-9]*$")
        LIST(APPEND RESULTV ${device})
    ENDIF(device MATCHES "msp430f(5|6)[a-z|0-9]*$")
ENDFOREACH(device ${SUPPORTED_DEVICES})

SET(SUPPORTED_DEVICES ${RESULTV})

IF(SUPPORTED_DEVICES)
FILE(GLOB SOURCES *.c)
ADD_PLATFORM_LIBRARY(msp430-driverlib STATIC "" ${SOURCES})
EXPORT_PLATFORM_LIBRARY(msp430-driverlib)
ENDIF(SUPPORTED_DEVICES)